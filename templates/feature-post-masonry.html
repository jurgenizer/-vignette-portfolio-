{% extends "layout.html" %}
{% block title %}{{ this.title }}{% endblock %}

{% block body %}
<h1 class="title has-text-primary">{{ this.title }}</h1>

<div class="container">
  {{ this.body }}
  <!-- <p>{{ this|url }}</p>  -->
  {% set documents = this.attachments.documents.all() %}
  {% if documents %}
  {% for document in documents %}
  <a href="{{document._id}}" class="button is-link" target="_blank"> Download {{ document._id }}</a>
  {% endfor %}
  {% endif %}

  {% set theurl = this|url|replace("/", "") %}
  {% set images = this.attachments.images.all() %}
  {% if images %}
  <div class="wrapper">
    <div class="masonry">
      {% for image in images %}
      <div class="masonry-brick">
        <picture class="masonry-img">
          <source srcset="{{ theurl}}{{'%03d'  % loop.index }}.webp" type="image/webp"
            alt="High quality photograph of {{ this.title }} design in webp file format">
          <source srcset="{{ theurl}}{{'%03d'  % loop.index }}.jpg" type="image/jpeg"
            alt="High quality photograph of {{ this.title }} design in webp file format">
          <img src="{{theurl}}{{'%03d'  % loop.index }}.jpg" alt="Photo of {{ this.title }} design in jpg file format">
        </picture>
        <p class="top-left">{{ image._id}}</p>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}
</div>

<section class="section">
  <div class="container">
    {% set siblings = this.get_siblings() %}
    {% set older = siblings.next_page %}
    {% set newer = siblings.prev_page %}

    <nav class="pagination is-small" role="navigation" aria-label="pagination">
      {% if older %}
      <a class="pagination-previous" href="{{ older|url }}">Previous: {{ older.title }}</a>
      {% endif %}
      {% if newer %}
      <a class="pagination-next" href="{{ newer|url }}">Next: {{ newer.title }}</a>
      {% endif %}
    </nav>
  </div>
</section>
<style>/* Critical Path CSS Generated by Pegasaas Accelerator at https://pegasaas.com/critical-path-css-generator/ for https://vignette.agency/rupperti-yazdi/ */
  @charset "UTF-8";.button,.pagination-next,.pagination-previous{-webkit-touch-callout:none}.navbar-link:not(.is-arrowless)::after{border:3px solid transparent;border-radius:2px;border-right:0;border-top:0;content:" ";display:block;height:.625em;margin-top:-.4375em;position:absolute;top:50%;transform:rotate(-45deg);transform-origin:center;width:.625em}.content:not(:last-child),.title:not(:last-child){margin-bottom:1.5rem}.button,.pagination-next,.pagination-previous{-moz-appearance:none;-webkit-appearance:none;align-items:center;border:1px solid transparent;border-radius:4px;box-shadow:none;display:inline-flex;font-size:1rem;height:2.5em;justify-content:flex-start;line-height:1.5;padding-bottom:calc(.5em - 1px);padding-left:calc(.75em - 1px);padding-right:calc(.75em - 1px);padding-top:calc(.5em - 1px);position:relative;vertical-align:top}body,h1,html,p{margin:0;padding:0}h1{font-size:100%;font-weight:400}html{box-sizing:border-box}*,::after,::before{box-sizing:inherit}img{height:auto;max-width:100%}html{background-color:#fff;font-size:16px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;min-width:300px;overflow-x:hidden;overflow-y:scroll;text-rendering:optimizeLegibility;text-size-adjust:100%}footer,section{display:block}body{font-family:BlinkMacSystemFont,-apple-system,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Helvetica,Arial,sans-serif}body{color:#4a4a4a;font-size:1em;font-weight:300;line-height:1.5}a{color:#fa7c91;text-decoration:none}img{height:auto;max-width:100%}span{font-style:inherit;font-weight:inherit}.navbar{background-color:#fff;min-height:3.25rem;position:relative;z-index:30}.navbar.is-primary{background-color:#061c30;color:#fff}.navbar.is-primary .navbar-burger{color:#fff}@media screen and (min-width:1024px){.navbar.is-primary .navbar-end .navbar-link,.navbar.is-primary .navbar-end>.navbar-item{color:#fff}.navbar.is-primary .navbar-end .navbar-link::after{border-color:#fff}}.navbar>.container{align-items:stretch;display:flex;min-height:3.25rem;width:100%}.navbar-brand{align-items:stretch;display:flex;flex-shrink:0;min-height:3.25rem}.navbar-burger{color:#4a4a4a;display:block;height:3.25rem;position:relative;width:3.25rem;margin-left:auto}.navbar-burger span{background-color:currentColor;display:block;height:1px;left:calc(50% - 8px);position:absolute;transform-origin:center;width:16px}.navbar-burger span:nth-child(1){top:calc(50% - 6px)}.navbar-burger span:nth-child(2){top:calc(50% - 1px)}.navbar-burger span:nth-child(3){top:calc(50% + 4px)}.navbar-menu{display:none}.navbar-item,.navbar-link{color:#4a4a4a;display:block;line-height:1.5;padding:.5rem .75rem;position:relative}.navbar-item{flex-grow:0;flex-shrink:0}.navbar-item.has-dropdown{padding:0}.navbar-link:not(.is-arrowless){padding-right:2.5em}.navbar-link:not(.is-arrowless)::after{border-color:#fa7c91;margin-top:-.375em;right:1.125em}.navbar-dropdown{font-size:.875rem;padding-bottom:.5rem;padding-top:.5rem}.navbar-dropdown .navbar-item{padding-left:1.5rem;padding-right:1.5rem}@media screen and (max-width:1023px){.navbar>.container{display:block}.navbar-link::after{display:none}.navbar-menu{background-color:#fff;box-shadow:0 8px 16px rgba(10,10,10,.1);padding:.5rem 0}}@media screen and (min-width:1024px){.navbar,.navbar-end,.navbar-menu{align-items:stretch;display:flex}.navbar{min-height:3.25rem}.navbar.is-spaced{padding:1rem 2rem}.navbar.is-spaced .navbar-end{align-items:center}.navbar.is-spaced .navbar-link,.navbar.is-spaced a.navbar-item{border-radius:4px}.navbar-burger{display:none}.navbar-item,.navbar-link{align-items:center;display:flex}.navbar-item.has-dropdown{align-items:stretch}.navbar-menu{flex-grow:1;flex-shrink:0}.navbar-end{justify-content:flex-end;margin-left:auto}.navbar-dropdown{background-color:#fff;border-bottom-left-radius:6px;border-bottom-right-radius:6px;border-top:2px solid #dbdbdb;box-shadow:0 8px 8px rgba(10,10,10,.1);display:none;font-size:.875rem;left:0;min-width:100%;position:absolute;top:100%;z-index:20}.navbar-dropdown .navbar-item{padding:.375rem 1rem;white-space:nowrap}.navbar-dropdown a.navbar-item{padding-right:3rem}.navbar.is-spaced .navbar-dropdown{border-radius:6px;border-top:none;box-shadow:0 8px 8px rgba(10,10,10,.1),0 0 0 1px rgba(10,10,10,.1);display:block;opacity:0;top:calc(100% + (-4px));transform:translateY(-5px)}.navbar>.container .navbar-brand{margin-left:-.75rem}.navbar>.container .navbar-menu{margin-right:-.75rem}}.pagination{font-size:1rem;margin:-.25rem}.pagination.is-small{font-size:.75rem}.pagination{align-items:center;display:flex;justify-content:center;text-align:center}.pagination-next,.pagination-previous{font-size:1em;justify-content:center;margin:.25rem;padding-left:.5em;padding-right:.5em;text-align:center}.pagination-next,.pagination-previous{border-color:#dbdbdb;color:#363636;min-width:2.5em}.pagination-next,.pagination-previous{padding-left:.75em;padding-right:.75em;white-space:nowrap}@media screen and (max-width:768px){.pagination{flex-wrap:wrap}.pagination-next,.pagination-previous{flex-grow:1;flex-shrink:1}}@media screen and (min-width:769px),print{.pagination-previous{order:2}.pagination-next{order:3}.pagination{justify-content:space-between}}.button{background-color:#fff;border-color:#dbdbdb;border-width:1px;color:#363636;justify-content:center;padding-bottom:calc(.5em - 1px);padding-left:1em;padding-right:1em;padding-top:calc(.5em - 1px);text-align:center;white-space:nowrap}.button.is-link{background-color:#fa7c91;border-color:transparent;color:#fff}.container{flex-grow:1;margin:0 auto;position:relative;width:auto}@media screen and (min-width:1024px){.container{max-width:960px}}@media screen and (min-width:1216px){.container:not(.is-max-desktop){max-width:1152px}}@media screen and (min-width:1408px){.container:not(.is-max-desktop):not(.is-max-widescreen){max-width:1344px}}.content p:not(:last-child){margin-bottom:1em}.content h1{color:#363636;font-weight:500;line-height:1.125}.content h1{font-size:2em;margin-bottom:.5em}.title{word-break:break-word}.title{color:#363636;font-size:2rem;font-weight:500;line-height:1.125}.has-text-white{color:#fff!important}.has-text-primary{color:#061c30!important}.pt-1{padding-top:.25rem!important}.pt-2{padding-top:.5rem!important}.pl-4{padding-left:1rem!important}.pt-5{padding-top:1.5rem!important}.has-text-centered{text-align:center!important}.footer{background-color:#595959;padding:3rem 1.5rem 6rem}.section{padding:3rem 1.5rem}.wrapper{margin:1em auto;max-width:1400px}img{vertical-align:middle;max-width:100%}.masonry{display:flex;flex-flow:column wrap;margin-left:-15px;counter-reset:brick;width:100%}.masonry-brick{overflow:hidden;border-radius:5px;margin:0 0 15px 15px;background-color:#eee;position:relative}@media only screen and (min-width:1008px){.masonry-brick{width:33.33333%}}@media only screen and (min-width:769px) and (max-width:1007px){.masonry-brick{width:50%}}@media only screen and (max-width:768px){.masonry-brick{width:100%}}.masonry-img{object-fit:cover;width:100%;height:100%}.top-left{position:absolute;top:16px;left:16px;z-index:5000;color:#fff;text-shadow:2px 2px 5px #000}.jurgen-preloader{margin:0 auto;z-index:5;border:11px solid #fff;border-top:11px solid #3498db;border-radius:50%;width:80px;height:80px;animation:spin 2s linear infinite;-webkit-animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0)}100%{-webkit-transform:rotate(360deg)}}</style>
<link rel="stylesheet" href="{{ '/static/masonry.css'|url }}">
<!-- Thank you to https://imagesloaded.desandro.com/-->
<script src="https://unpkg.com/imagesloaded@^4/imagesloaded.pkgd.min.js"></script>

<script>function masonry(grid, gridCell, gridGutter, dGridCol, tGridCol, mGridCol) {
    var g = document.querySelector(grid),
      gc = document.querySelectorAll(gridCell),
      gcLength = gc.length,
      gHeight = 0,
      i;

    for (i = 0; i < gcLength; ++i) {
      gHeight += gc[i].offsetHeight + parseInt(gridGutter);
    }

    if (window.screen.width >= 1024)
      g.style.height = gHeight / dGridCol + gHeight / (gcLength + 1) + "px";
    else if (window.screen.width < 1024 && window.screen.width >= 768)
      g.style.height = gHeight / tGridCol + gHeight / (gcLength + 1) + "px";
    else
      g.style.height = gHeight / mGridCol + gHeight / (gcLength + 1) + "px";
  }

  var masonryGrid = document.querySelector('.masonry');
  masonryGrid.insertAdjacentHTML("afterend", "<div class='jurgen-preloader'></div>")
  var masonryPreloader = document.querySelector('.jurgen-preloader');

  ["resize", "load"].forEach(function (event) {
    // Adding a little preloader information
    masonryGrid.style.display = "none";
    window.addEventListener(event, function () {
      imagesLoaded(document.querySelector('.masonry'), function () {
        masonryGrid.style.display = "flex";
        masonryPreloader.style.display = "none";
        // A masonry grid with 8px gutter, with 3 columns on desktop, 2 on tablet, and 1 column on mobile devices.
        masonry(".masonry", ".masonry-brick", 10, 3, 2, 1);
        console.log("Loaded");
      });
    }, false);
  });
</script>

{% endblock %}